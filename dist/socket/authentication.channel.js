"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function dispatch(msg, server) {
    if (msg.request === 'list') {
        return Promise.resolve({
            response: msg.request,
            types: server.config.authTypes,
        });
    }
    else if (msg.request === 'testkey') {
        return server.oracle.keyService.test(msg.key)
            .then(function (v) {
            return {
                response: msg.request,
                auth: v,
            };
        });
    }
    else {
        return Promise.resolve({
            response: 'invalidRequest',
        });
    }
}
exports.dispatch = dispatch;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zb2NrZXQvYXV0aGVudGljYXRpb24uY2hhbm5lbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU9BLGtCQUF5QixHQUFpQyxFQUFFLE1BQW1CO0lBQzdFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQztRQUMzQixNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztZQUNyQixRQUFRLEVBQUUsR0FBRyxDQUFDLE9BQU87WUFDckIsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUztTQUMvQixDQUFDLENBQUM7SUFDTCxDQUFDO0lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztRQUNyQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7YUFDNUMsSUFBSSxDQUFDLFVBQUMsQ0FBQztZQUNOLE1BQU0sQ0FBQztnQkFDTCxRQUFRLEVBQUUsR0FBRyxDQUFDLE9BQU87Z0JBQ3JCLElBQUksRUFBRSxDQUFDO2FBQ1IsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7WUFDckIsUUFBUSxFQUFFLGdCQUFnQjtTQUMzQixDQUFDLENBQUM7SUFDTCxDQUFDO0FBQ0gsQ0FBQztBQW5CRCw0QkFtQkMiLCJmaWxlIjoic29ja2V0L2F1dGhlbnRpY2F0aW9uLmNoYW5uZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBdXRoZW50aWNhdGlvbkNoYW5uZWxNZXNzYWdlLFxuICBBdXRoZW50aWNhdGlvbkNoYW5uZWxSZXNwb25zZSxcbiAgUmVzcG9uc2UsXG59IGZyb20gJy4vbWVzc2FnZUludGVyZmFjZXMnO1xuaW1wb3J0IHsgU3RydXRTZXJ2ZXIgfSBmcm9tICcuLi9zZXJ2ZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGF0Y2gobXNnOiBBdXRoZW50aWNhdGlvbkNoYW5uZWxNZXNzYWdlLCBzZXJ2ZXI6IFN0cnV0U2VydmVyKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvbkNoYW5uZWxSZXNwb25zZT4ge1xuICBpZiAobXNnLnJlcXVlc3QgPT09ICdsaXN0Jykge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgcmVzcG9uc2U6IG1zZy5yZXF1ZXN0LFxuICAgICAgdHlwZXM6IHNlcnZlci5jb25maWcuYXV0aFR5cGVzLFxuICAgIH0pO1xuICB9IGVsc2UgaWYgKG1zZy5yZXF1ZXN0ID09PSAndGVzdGtleScpIHtcbiAgICByZXR1cm4gc2VydmVyLm9yYWNsZS5rZXlTZXJ2aWNlLnRlc3QobXNnLmtleSlcbiAgICAudGhlbigodikgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzcG9uc2U6IG1zZy5yZXF1ZXN0LFxuICAgICAgICBhdXRoOiB2LFxuICAgICAgfTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgIHJlc3BvbnNlOiAnaW52YWxpZFJlcXVlc3QnLFxuICAgIH0pO1xuICB9XG59XG4iXX0=
